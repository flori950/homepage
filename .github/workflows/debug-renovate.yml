name: Debug Renovate

on:
  workflow_dispatch:

jobs:
  debug:
    name: Debug Renovate Setup
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Validate renovate.json
        run: |
          echo "ğŸ” Validating renovate.json syntax..."
          if jq empty renovate.json; then
            echo "âœ… renovate.json is valid JSON"
            echo "ğŸ“‹ Configuration preview:"
            jq '.description, .timezone, .schedule' renovate.json
          else
            echo "âŒ renovate.json has invalid JSON syntax"
            exit 1
          fi

      - name: Check renovate config
        run: |
          echo "ğŸ”§ Renovate configuration check:"
          npx renovate-config-validator --strict
        continue-on-error: true

      - name: List repository files
        run: |
          echo "ğŸ“ Repository structure:"
          find . -name "*.json" -o -name "*.yml" -o -name "*.yaml" | head -20
