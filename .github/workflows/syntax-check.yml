name: 🔍 Syntax Check

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  syntax-check:
    name: 🧹 Code Quality & Syntax Check
    runs-on: ubuntu-latest
    
    steps:
    - name: 🚚 Checkout code
      uses: actions/checkout@v4
      
    - name: 🟢 Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        
    - name: 📦 Install dependencies
      run: |
        npm init -y
        npm install htmlhint stylelint stylelint-config-standard eslint --save-dev
        
    - name: 🔍 HTML Syntax Check
      continue-on-error: true
      run: |
        echo "Checking HTML files..."
        if find . -name "*.html" -not -path "./node_modules/*" | grep -q .; then
          find . -name "*.html" -not -path "./node_modules/*" | xargs npx htmlhint --config .htmlhintrc
        else
          echo "No HTML files found"
        fi
        
    - name: 🎨 CSS Syntax Check  
      continue-on-error: true
      run: |
        echo "Checking CSS files..."
        if find . -name "*.css" -not -path "./node_modules/*" | grep -q .; then
          find . -name "*.css" -not -path "./node_modules/*" | xargs npx stylelint --config .stylelintrc.json
        else
          echo "No CSS files found"
        fi
        
    - name: ⚡ JavaScript Syntax Check
      continue-on-error: true
      run: |
        echo "Checking JavaScript files..."
        if find . -name "*.js" -not -path "./node_modules/*" | grep -q .; then
          find . -name "*.js" -not -path "./node_modules/*" | xargs npx eslint --config .eslintrc.json
        else
          echo "No JavaScript files found"
        fi
        
    - name: 📝 Generate Report
      run: |
        echo "✅ Syntax check completed!"
        echo "Files checked:"
        echo "- HTML: $(find . -name '*.html' -not -path './node_modules/*' | wc -l) files"
        echo "- CSS: $(find . -name '*.css' -not -path './node_modules/*' | wc -l) files" 
        echo "- JS: $(find . -name '*.js' -not -path './node_modules/*' | wc -l) files"
        echo ""
        echo "ℹ️  This workflow checks syntax but won't fail the build."
        echo "📋 Check the logs above for any syntax issues to fix."
